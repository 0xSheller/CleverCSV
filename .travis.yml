language: python
python:
  - "3.6"
  - "3.7"

matrix:
  include:
    - os: linux
      sudo: required
      services: docker
      python: '3.6'

    - os: linux
      dist: xenial
      sudo: required
      services: docker
      python: '3.7'

    - osx:
      language: generic

env:
  global:
    - CIBW_SKIP="cp27-* cp33-* cp34-* cp35-*"
    - CIBW_BUILD_VERBOSITY=3
    - CC="gcc"
    - PIP=pip3
    - PYTHON=python3

install:
  - $PIP install --upgrade pip==18.1
  - $PYTHON setup.py build_ext --inplace
  - $PIP install -r requirements.txt
  - green -v ./tests/test_unit

script:
  - $PIP install cibuildwheel==0.12.0
  - cibuildwheel --output-dir wheelhouse
